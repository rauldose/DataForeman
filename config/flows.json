{
  "flows": [
    {
      "id": "flow-temp-alarm",
      "name": "Temperature Alarm",
      "description": "Monitors temperature and triggers alarm when exceeds threshold",
      "enabled": true,
      "scanRateMs": 500,
      "nodes": [
        {
          "id": "tag-input-instance-temp1",
          "type": "tag-input",
          "label": "Temperature",
          "x": 100,
          "y": 150,
          "properties": {
            "tagPath": "sim-temp-1"
          }
        },
        {
          "id": "logic-compare-instance-check1",
          "type": "logic-compare",
          "label": "Check > 30°C",
          "x": 350,
          "y": 150,
          "properties": {
            "operator": ">",
            "compareValue": "30"
          }
        },
        {
          "id": "output-log-instance-debug1",
          "type": "output-log",
          "label": "Debug Output",
          "x": 600,
          "y": 100,
          "properties": {
            "logLevel": "info"
          }
        },
        {
          "id": "output-notification-instance-alert1",
          "type": "output-notification",
          "label": "High Temp Alert",
          "x": 600,
          "y": 250,
          "properties": {
            "title": "Temperature Alert",
            "message": "Temperature exceeds 30°C threshold",
            "severity": "warning"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-1",
          "sourceNodeId": "tag-input-instance-temp1",
          "sourcePortId": "output-0",
          "targetNodeId": "logic-compare-instance-check1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-2",
          "sourceNodeId": "logic-compare-instance-check1",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-debug1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-3",
          "sourceNodeId": "logic-compare-instance-check1",
          "sourcePortId": "output-0",
          "targetNodeId": "output-notification-instance-alert1",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-04T19:00:00Z",
      "updatedAt": "2026-02-04T19:00:00Z"
    },
    {
      "id": "flow-data-calc",
      "name": "Data Calculation",
      "description": "Performs calculations on sensor data and outputs results",
      "enabled": true,
      "scanRateMs": 1000,
      "nodes": [
        {
          "id": "tag-input-instance-level1",
          "type": "tag-input",
          "label": "Tank Level",
          "x": 100,
          "y": 100,
          "properties": {
            "tagPath": "sim-level-1"
          }
        },
        {
          "id": "tag-input-instance-flow1",
          "type": "tag-input",
          "label": "Flow Rate",
          "x": 100,
          "y": 250,
          "properties": {
            "tagPath": "sim-flow-1"
          }
        },
        {
          "id": "math-scale-instance-scale1",
          "type": "math-scale",
          "label": "Scale 0-100",
          "x": 350,
          "y": 100,
          "properties": {
            "inputMin": "0",
            "inputMax": "100",
            "outputMin": "0",
            "outputMax": "1000"
          }
        },
        {
          "id": "math-multiply-instance-mult1",
          "type": "math-multiply",
          "label": "Calculate Volume",
          "x": 550,
          "y": 175,
          "properties": {}
        },
        {
          "id": "data-smooth-instance-smooth1",
          "type": "data-smooth",
          "label": "Smooth Value",
          "x": 750,
          "y": 175,
          "properties": {
            "sampleCount": "10",
            "algorithm": "MovingAverage"
          }
        },
        {
          "id": "output-log-instance-output1",
          "type": "output-log",
          "label": "Output",
          "x": 950,
          "y": 175,
          "properties": {
            "logLevel": "info"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-calc-1",
          "sourceNodeId": "tag-input-instance-level1",
          "sourcePortId": "output-0",
          "targetNodeId": "math-scale-instance-scale1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-calc-2",
          "sourceNodeId": "math-scale-instance-scale1",
          "sourcePortId": "output-0",
          "targetNodeId": "math-multiply-instance-mult1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-calc-3",
          "sourceNodeId": "tag-input-instance-flow1",
          "sourcePortId": "output-0",
          "targetNodeId": "math-multiply-instance-mult1",
          "targetPortId": "input-1"
        },
        {
          "id": "edge-calc-4",
          "sourceNodeId": "math-multiply-instance-mult1",
          "sourcePortId": "output-0",
          "targetNodeId": "data-smooth-instance-smooth1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-calc-5",
          "sourceNodeId": "data-smooth-instance-smooth1",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-output1",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-04T19:00:00Z",
      "updatedAt": "2026-02-04T19:00:00Z"
    },
    {
      "id": "flow-simple-test",
      "name": "Simple Test Flow",
      "description": "Simple flow for end-to-end testing with trigger and debug output",
      "enabled": true,
      "executionMode": "manual",
      "scanRateMs": 1000,
      "nodes": [
        {
          "id": "trigger-manual-instance-start1",
          "type": "trigger-manual",
          "label": "Manual Start",
          "x": 100,
          "y": 150,
          "properties": {
            "runOnDeploy": "true"
          }
        },
        {
          "id": "tag-input-instance-temp2",
          "type": "tag-input",
          "label": "Read Temperature",
          "x": 350,
          "y": 150,
          "properties": {
            "tagPath": "sim-temp-1"
          }
        },
        {
          "id": "output-log-instance-log1",
          "type": "output-log",
          "label": "Log Value",
          "x": 600,
          "y": 150,
          "properties": {
            "logLevel": "info"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-test-1",
          "sourceNodeId": "trigger-manual-instance-start1",
          "sourcePortId": "output-0",
          "targetNodeId": "tag-input-instance-temp2",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-test-2",
          "sourceNodeId": "tag-input-instance-temp2",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-log1",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-04T19:00:00Z",
      "updatedAt": "2026-02-04T19:00:00Z"
    },
    {
      "id": "flow-csharp-demo",
      "name": "C# Script Demo",
      "description": "Demonstrates C# scripting: reads temperature, computes a running average, and logs diagnostics",
      "enabled": true,
      "executionMode": "manual",
      "scanRateMs": 1000,
      "nodes": [
        {
          "id": "trigger-manual-csharp",
          "type": "trigger-manual",
          "label": "Manual Trigger",
          "x": 80,
          "y": 150,
          "properties": {
            "runOnDeploy": "false"
          }
        },
        {
          "id": "tag-input-temp-csharp",
          "type": "tag-input",
          "label": "Read Temperature",
          "x": 300,
          "y": 150,
          "properties": {
            "tagPath": "sim-temp-1"
          }
        },
        {
          "id": "script-csharp-avg",
          "type": "script-csharp",
          "label": "Running Average",
          "x": 540,
          "y": 150,
          "properties": {
            "code": "// Read the incoming temperature value\nvar temp = ReadTagDouble(\"Default Simulator/Temperature_001\");\n\n// Keep a running sum and count in persistent state\nvar count = GetState<int>(\"count\", 0) + 1;\nvar sum = GetState<double>(\"sum\", 0.0) + temp;\nSetState(\"count\", count);\nSetState(\"sum\", sum);\n\nvar avg = sum / count;\nLog($\"Sample #{count}: temp={temp:F2}, avg={avg:F2}\");\n\n// Return the average as output\navg",
            "timeout": "5000"
          }
        },
        {
          "id": "output-log-csharp",
          "type": "output-log",
          "label": "Log Result",
          "x": 780,
          "y": 150,
          "properties": {
            "logLevel": "info"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-cs-1",
          "sourceNodeId": "trigger-manual-csharp",
          "sourcePortId": "output-0",
          "targetNodeId": "tag-input-temp-csharp",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-cs-2",
          "sourceNodeId": "tag-input-temp-csharp",
          "sourcePortId": "output-0",
          "targetNodeId": "script-csharp-avg",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-cs-3",
          "sourceNodeId": "script-csharp-avg",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-csharp",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-06T00:00:00Z",
      "updatedAt": "2026-02-06T00:00:00Z"
    }
  ]
}
