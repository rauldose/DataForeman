{
  "flows": [
    {
      "id": "flow-temp-alarm",
      "name": "Temperature Alarm",
      "description": "Monitors temperature and triggers alarm when exceeds threshold",
      "enabled": true,
      "scanRateMs": 500,
      "nodes": [
        {
          "id": "tag-input-instance-temp1",
          "type": "tag-input",
          "label": "Temperature",
          "x": 100,
          "y": 150,
          "properties": {
            "tagPath": "sim-temp-1"
          }
        },
        {
          "id": "logic-compare-instance-check1",
          "type": "logic-compare",
          "label": "Check > 30째C",
          "x": 350,
          "y": 150,
          "properties": {
            "operator": ">",
            "compareValue": "30"
          }
        },
        {
          "id": "output-log-instance-debug1",
          "type": "output-log",
          "label": "Debug Output",
          "x": 600,
          "y": 100,
          "properties": {
            "logLevel": "info"
          }
        },
        {
          "id": "output-notification-instance-alert1",
          "type": "output-notification",
          "label": "High Temp Alert",
          "x": 600,
          "y": 250,
          "properties": {
            "title": "Temperature Alert",
            "message": "Temperature exceeds 30째C threshold",
            "severity": "warning"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-1",
          "sourceNodeId": "tag-input-instance-temp1",
          "sourcePortId": "output-0",
          "targetNodeId": "logic-compare-instance-check1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-2",
          "sourceNodeId": "logic-compare-instance-check1",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-debug1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-3",
          "sourceNodeId": "logic-compare-instance-check1",
          "sourcePortId": "output-0",
          "targetNodeId": "output-notification-instance-alert1",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-04T19:00:00Z",
      "updatedAt": "2026-02-04T19:00:00Z"
    },
    {
      "id": "flow-data-calc",
      "name": "Data Calculation",
      "description": "Performs calculations on sensor data and outputs results",
      "enabled": true,
      "scanRateMs": 1000,
      "nodes": [
        {
          "id": "tag-input-instance-level1",
          "type": "tag-input",
          "label": "Tank Level",
          "x": 100,
          "y": 100,
          "properties": {
            "tagPath": "sim-level-1"
          }
        },
        {
          "id": "tag-input-instance-flow1",
          "type": "tag-input",
          "label": "Flow Rate",
          "x": 100,
          "y": 250,
          "properties": {
            "tagPath": "sim-flow-1"
          }
        },
        {
          "id": "math-scale-instance-scale1",
          "type": "math-scale",
          "label": "Scale 0-100",
          "x": 350,
          "y": 100,
          "properties": {
            "inputMin": "0",
            "inputMax": "100",
            "outputMin": "0",
            "outputMax": "1000"
          }
        },
        {
          "id": "math-multiply-instance-mult1",
          "type": "math-multiply",
          "label": "Calculate Volume",
          "x": 550,
          "y": 175,
          "properties": {}
        },
        {
          "id": "data-smooth-instance-smooth1",
          "type": "data-smooth",
          "label": "Smooth Value",
          "x": 750,
          "y": 175,
          "properties": {
            "sampleCount": "10",
            "algorithm": "MovingAverage"
          }
        },
        {
          "id": "output-log-instance-output1",
          "type": "output-log",
          "label": "Output",
          "x": 950,
          "y": 175,
          "properties": {
            "logLevel": "info"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-calc-1",
          "sourceNodeId": "tag-input-instance-level1",
          "sourcePortId": "output-0",
          "targetNodeId": "math-scale-instance-scale1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-calc-2",
          "sourceNodeId": "math-scale-instance-scale1",
          "sourcePortId": "output-0",
          "targetNodeId": "math-multiply-instance-mult1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-calc-3",
          "sourceNodeId": "tag-input-instance-flow1",
          "sourcePortId": "output-0",
          "targetNodeId": "math-multiply-instance-mult1",
          "targetPortId": "input-1"
        },
        {
          "id": "edge-calc-4",
          "sourceNodeId": "math-multiply-instance-mult1",
          "sourcePortId": "output-0",
          "targetNodeId": "data-smooth-instance-smooth1",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-calc-5",
          "sourceNodeId": "data-smooth-instance-smooth1",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-output1",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-04T19:00:00Z",
      "updatedAt": "2026-02-04T19:00:00Z"
    },
    {
      "id": "flow-simple-test",
      "name": "Simple Test Flow",
      "description": "Simple flow for end-to-end testing with trigger and debug output",
      "enabled": true,
      "scanRateMs": 1000,
      "nodes": [
        {
          "id": "trigger-manual-instance-start1",
          "type": "trigger-manual",
          "label": "Manual Start",
          "x": 100,
          "y": 150,
          "properties": {
            "runOnDeploy": "true"
          }
        },
        {
          "id": "tag-input-instance-temp2",
          "type": "tag-input",
          "label": "Read Temperature",
          "x": 350,
          "y": 150,
          "properties": {
            "tagPath": "sim-temp-1"
          }
        },
        {
          "id": "output-log-instance-log1",
          "type": "output-log",
          "label": "Log Value",
          "x": 600,
          "y": 150,
          "properties": {
            "logLevel": "info"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-test-1",
          "sourceNodeId": "trigger-manual-instance-start1",
          "sourcePortId": "output-0",
          "targetNodeId": "tag-input-instance-temp2",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-test-2",
          "sourceNodeId": "tag-input-instance-temp2",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-log1",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-04T19:00:00Z",
      "updatedAt": "2026-02-04T19:00:00Z"
    },
    {
      "id": "flow-csharp-demo",
      "name": "C# Script Demo",
      "description": "Demonstrates custom C# scripting: reads temperature, applies exponential moving average and deadband logic in code, then logs the result",
      "enabled": true,
      "executionMode": "manual",
      "scanRateMs": 1000,
      "nodes": [
        {
          "id": "trigger-manual-instance-cs1",
          "type": "trigger-manual",
          "label": "Manual Trigger",
          "x": 80,
          "y": 150,
          "properties": {
            "runOnDeploy": "false"
          }
        },
        {
          "id": "tag-input-instance-cs-temp",
          "type": "tag-input",
          "label": "Temperature",
          "x": 300,
          "y": 150,
          "properties": {
            "tagPath": "sim-temp-1"
          }
        },
        {
          "id": "script-csharp-instance-ema",
          "type": "script-csharp",
          "label": "EMA + Deadband",
          "x": 550,
          "y": 150,
          "properties": {
            "code": "// Exponential Moving Average with deadband filter\nvar raw = Input is double d ? d : 0.0;\nvar alpha = 0.3;\nvar prev = GetState<double>(\"ema\", raw);\nvar ema = alpha * raw + (1.0 - alpha) * prev;\nSetState(\"ema\", ema);\n\n// Deadband: only emit when change > 0.5째C\nvar lastEmitted = GetState<double>(\"lastEmitted\", double.MinValue);\nif (Math.Abs(ema - lastEmitted) > 0.5)\n{\n    SetState(\"lastEmitted\", ema);\n    Log($\"EMA={ema:F2}째C (raw={raw:F2})\");\n    return Math.Round(ema, 2);\n}\nreturn null; // suppress output",
            "timeout": "5000",
            "onError": "continue"
          }
        },
        {
          "id": "output-log-instance-cs-out",
          "type": "output-log",
          "label": "Log Result",
          "x": 800,
          "y": 150,
          "properties": {
            "logLevel": "info"
          }
        }
      ],
      "edges": [
        {
          "id": "edge-cs-1",
          "sourceNodeId": "trigger-manual-instance-cs1",
          "sourcePortId": "output-0",
          "targetNodeId": "tag-input-instance-cs-temp",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-cs-2",
          "sourceNodeId": "tag-input-instance-cs-temp",
          "sourcePortId": "output-0",
          "targetNodeId": "script-csharp-instance-ema",
          "targetPortId": "input-0"
        },
        {
          "id": "edge-cs-3",
          "sourceNodeId": "script-csharp-instance-ema",
          "sourcePortId": "output-0",
          "targetNodeId": "output-log-instance-cs-out",
          "targetPortId": "input-0"
        }
      ],
      "createdAt": "2026-02-06T00:00:00Z",
      "updatedAt": "2026-02-06T00:00:00Z"
    }
  ]
}
